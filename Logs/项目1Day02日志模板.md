# 项目1Day02日志

### 1. 描述清楚新增员工的实现流程

```
前端提交新增员工参数到后端，后端封装参数为EmployeeDTO实体类，控制接受到参数后，控制层传递参数并调用业务层employeeService的新增员工的业务方法，业务层获得参数后调用数据层的方法执行sql语句，将一条新的员工记录增加到数据库中的employee表中 
```



### 2. 描述清楚员工分页条件查询的实现流程

```
控制层获取到前端传递的分页参数，分别为页码(必须)，一页显示的记录数(必须)，以及员工姓名(可为空)，获取参数后调用业务逻辑层分页方法，在业务逻辑层的方法中，先调用PageHelper的静态方法startPage设置分页参数，页码，页面大小，在调用持久层方法查询数据库，pagehelper插件会动态地为sql语句拼接limit子句，以及自动统计查询结果统计记录，mapper返回的结果封装在一个page对象中，里面包含了需要传递的两个结果，total(查询记录数)，result（查询结果），因为前端只需要这两个参数，所以封装了一个PageResult接受查询结果，将PageResult返回给控制层，再由控制层封装为Result对象传递给前端
```



### 3. 如何用ThreadLocal实现员工ID的获取？

```
客户端每发一次请求到服务器，tomcat都会从线程池中寻找一个空闲线程来处理。ThreadLocal作用在每个线程内都都需要独立的保存信息，这样就方便同一个线程的其他方法获取到该信息的场景，所以我们可以在拦截器中从token中获取id，并保存在threadlocal中，方便这一次请求中后续方法获取员工id，当把员工id set在threadlocal中时，其实是每个线程内部维护了一个threadlocalmap的哈希表，键为threalocal对象，值为我们需要存放的值（在本案例中为id），从threadlocal中get值时相当于从每个线程内的threadlocal中获取值，实现每个线程设置拥有一个独有的值而不是共享的值
```



### 4. Java对象转json的日期格式如何指定？

```
自定义mvc配置类继承WebMvcConfigurationSupport，并且重写extendMessageConverters方法，在该方法中创建一个消息转换器对象，为消息转换器设置一个对象转换器，对象转换器可以将Java对象序列化为json数据，这个对象转换器序列化json的规则可以有我们自己添加指定，消息转换器完成设置后添加都容器中
```



### 5. 描述清楚修改员工的实现流程

```
首先根据参数id从后端将用户可以修改的信息回显到前端，员工信息修改完成后再将信息传递到后端，后端将数据封装为EmployeeDTO实体类后，传递对象给业务逻辑层由业务逻辑层来处理业务需求，业务逻辑层在获取employeeDTO对象后再封装成employee对象，并添加修改时间，修改人id数据后，在传递给数据层由数据层完成数据库内员工信息的修改
```



